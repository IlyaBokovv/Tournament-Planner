# Tournament Planner

## Вступление


Вы добровольно помогаете в местном теннисном клубе. К счастью, в вашем клубе ровно 32 активных участника. В ближайшей неделе состоится ежегодное клубное чемпионство. Вашей задачей является создание программного обеспечения для организации матчей чемпионата.

В каждом матче два случайных участника клуба (игрока) соревнуются друг с другом. Победитель проходит в следующий раунд. Это будет повторяться до тех пор, пока два игрока не дойдут до финала. Вот таблица, отображающая количество матчей в каждом раунде:

| Round | Matches | Total players |
| ----- | ------: | ------------: |
| 1     |      16 |            32 |
| 2     |       8 |            16 |
| 3     |       4 |             8 |
| 4     |       2 |             4 |
| 5     |       1 |             2 |

## Data Model

Ваше приложение должно хранить информацию о *игроках* и *матчах* в реляционной БД. Рассмотрите следующие требования перед выбором модели данных:

* Вы должны хранить информацию о *игроках* (=участники клуба, принимающие участие в чемпионате). Для каждого игрока необходимо хранить следующие поля:
  * Имя (required)
  * Номер телефона (text, optional)
* Вы должны хранить информацию о *матчах*. Для каждого матча необходимо хранить следующие поля:
  * Номер раунда (required; значения от 1 до 5)
  * Упоминания об обоих игроках, участвующих в матче (required).
  * Победитель (optional; будет установлено после окончания матча)

## Минимальные требования

Вы должны выполнить по крайней мере следующие требования:

* Завершите классы модели данных так, чтобы они могли удовлетворить вышеуказанные требования к модели данных.
  * Вы можете делать предположения относительно технических деталей, которые не были определены в требованиях.
* Расширьте класс контекста базы данных EFCore, чтобы можно было создавать миграции EFCore и создавать базу данных.
* Добавьте по меньшей мере следующие вспомогательные методы для следующих задач в классе контекста базы данных EFCore.
  * Добавить участника клуба (=игрока)
  * Добавить матч между двумя данными участниками клуба
  * Установить победителя существующего матча
  * Получить список всех матчей, у которых еще нет победителя
  * Удалить все (матчи, игроки); эта операция будет использоваться во время тестирования и после чемпионата для удаления всех личных данных
* Добавьте по меньшей мере следующий конечную точку веб-API:
  * Получить список всех игроков (GET на /api/players).

### Основные требования

### Сгенерируйте результаты матчей


* Добавьте вспомогательный метод в класс контекста базы данных EFCore для генерации записей матчей для следующего раунда. Для этого применяются следующие правила:

* Если в базе данных есть хотя бы один матч без победителя, выдайте исключение.
* Если количество игроков в базе данных не равно 32, выдайте исключение.
* Подсчитайте количество матчей, чтобы определить следующий раунд.
  * Если вы не нашли матчей в базе данных, следующим будет первый раунд.
  * Если вы нашли 16 завершенных матчей, следующим будет второй раунд.
  * Если вы нашли 24 завершенных матча, следующим будет третий раунд.
  * Если вы нашли 28 завершенных матчей, следующим будет четвертый раунд.
  * Если вы нашли 30 завершенных матчей, следующим будет пятый раунд (=финал).
* Если в базе данных есть любое другое количество матчей, выдайте исключение.
  * Генерируйте записи матчей для следующего раунда.
  * Если вы генерируете первый раунд, генерируйте матчи между случайными игроками.
  * Если вы генерируете любой другой раунд, генерируйте матчи между случайными победителями предыдущего раунда.

### ASP.NET Web API

Для добавления веб-конечных точек API для указанных операций, использующих методы контекста базы данных EFCore, вы можете сделать следующее:

* Добавление игрока (POST на /api/players)
* Получение списка всех игроков (GET на /api/players). Запрашивающая сторона может предоставить необязательный фильтр по имени (например, /api/players?name=Foo). Верните только тех членов, чье имя содержит заданный фильтр.
* Получение списка всех матчей, у которых нет победителя (GET на /api/matches/open).
* Генерация записей матчей для следующего раунда (POST на /api/matches/generate).
